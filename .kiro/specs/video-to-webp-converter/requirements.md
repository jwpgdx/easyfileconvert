# EasyFileConvert - 비디오 → WebP 변환기 요구사항

## 소개

EasyFileConvert는 클라이언트 사이드에서 동작하는 비디오 파일을 애니메이션 WebP로 변환하는 웹 애플리케이션입니다. 모든 변환 작업은 사용자의 브라우저에서 수행되어 개인정보 보호와 빠른 처리를 보장합니다.

## 용어 정의

- **EasyFileConvert**: 본 애플리케이션의 이름
- **FFmpeg.wasm**: 브라우저에서 동작하는 FFmpeg WebAssembly 버전
- **WebP**: Google에서 개발한 고효율 이미지 포맷 (애니메이션 지원)
- **변환 큐**: 순차적으로 처리되는 파일 대기열
- **미리보기**: 원본과 변환된 파일을 비교할 수 있는 기능

## 요구사항

### 요구사항 1: 파일 업로드 및 관리

**사용자 스토리:** 사용자로서 여러 비디오 파일을 한 번에 업로드하고 관리할 수 있기를 원한다.

#### 승인 기준

1. WHEN 사용자가 드래그 앤 드롭으로 파일을 업로드하면 THEN 시스템은 파일을 수락하고 목록에 추가해야 한다
2. WHEN 사용자가 파일 선택 버튼을 클릭하면 THEN 시스템은 파일 선택 대화상자를 표시해야 한다
3. WHEN 사용자가 지원되지 않는 파일 형식을 업로드하면 THEN 시스템은 오류 메시지를 표시해야 한다
4. WHEN 사용자가 50MB를 초과하는 파일을 업로드하면 THEN 시스템은 파일을 거부하고 경고를 표시해야 한다
5. WHEN 사용자가 20개를 초과하는 파일을 업로드하면 THEN 시스템은 추가 파일을 거부해야 한다

### 요구사항 2: 변환 품질 설정

**사용자 스토리:** 사용자로서 변환 품질을 선택하여 파일 크기와 화질의 균형을 맞출 수 있기를 원한다.

#### 승인 기준

1. WHEN 사용자가 품질 옵션을 선택하면 THEN 시스템은 해당 설정을 모든 변환에 적용해야 한다
2. WHEN 시스템이 품질 옵션을 제공하면 THEN 저용량, 표준, 고화질, 무손실 4가지 옵션이 있어야 한다
3. WHEN 사용자가 무손실 옵션을 선택하면 THEN 시스템은 파일 크기 증가 경고를 표시해야 한다
4. WHEN 변환이 시작되기 전이면 THEN 사용자는 품질 설정을 변경할 수 있어야 한다

### 요구사항 3: 순차적 변환 처리

**사용자 스토리:** 사용자로서 여러 파일을 안정적으로 순차 변환하여 브라우저 성능 문제를 방지하고 싶다.

#### 승인 기준

1. WHEN 변환이 시작되면 THEN 시스템은 한 번에 하나의 파일만 처리해야 한다
2. WHEN 파일이 변환 중이면 THEN 다른 파일들은 대기 상태를 유지해야 한다
3. WHEN 변환이 완료되면 THEN 시스템은 자동으로 다음 대기 중인 파일을 처리해야 한다
4. WHEN 변환 중 오류가 발생하면 THEN 시스템은 다음 파일로 넘어가야 한다

### 요구사항 4: 실시간 진행 상황 표시

**사용자 스토리:** 사용자로서 변환 진행 상황을 실시간으로 확인하여 예상 완료 시간을 파악하고 싶다.

#### 승인 기준

1. WHEN 파일이 변환 중이면 THEN 시스템은 현재 프레임과 총 프레임 수를 표시해야 한다
2. WHEN 진행률을 표시하면 THEN 백분율과 프레임 수를 함께 보여줘야 한다 (예: "85% (123/456)")
3. WHEN 프레임 정보가 없는 단계이면 THEN 시스템은 불확정 진행 표시를 사용해야 한다
4. WHEN 변환 단계가 변경되면 THEN 시스템은 현재 작업 내용을 텍스트로 표시해야 한다

### 요구사항 5: 개별 파일 제어

**사용자 스토리:** 사용자로서 각 파일을 개별적으로 시작, 취소, 재시도할 수 있어 세밀한 제어를 원한다.

#### 승인 기준

1. WHEN 파일이 IDLE 상태이면 THEN 사용자는 개별 시작 버튼을 사용할 수 있어야 한다
2. WHEN 파일이 READY 상태이면 THEN 사용자는 대기 취소 버튼을 사용할 수 있어야 한다
3. WHEN 파일이 ERROR 상태이면 THEN 사용자는 재시도 버튼을 사용할 수 있어야 한다
4. WHEN 파일이 PROCESSING 상태이면 THEN 사용자는 완료까지 기다려야 한다

### 요구사항 6: 미리보기 및 비교

**사용자 스토리:** 사용자로서 변환된 결과를 원본과 비교하여 품질과 압축률을 확인하고 싶다.

#### 승인 기준

1. WHEN 파일 변환이 완료되면 THEN 사용자는 미리보기 버튼을 사용할 수 있어야 한다
2. WHEN 미리보기가 열리면 THEN 원본 비디오와 WebP가 나란히 표시되어야 한다
3. WHEN 미리보기가 표시되면 THEN 원본은 자동 재생되고 WebP는 애니메이션으로 표시되어야 한다
4. WHEN 미리보기 높이를 조절하면 THEN 드래그 핸들로 200px~600px 범위에서 조절 가능해야 한다
5. WHEN 한 파일의 미리보기가 열리면 THEN 다른 파일의 미리보기는 자동으로 닫혀야 한다

### 요구사항 7: 파일 크기 및 압축률 표시

**사용자 스토리:** 사용자로서 변환 전후의 파일 크기와 압축률을 확인하여 변환 효과를 파악하고 싶다.

#### 승인 기준

1. WHEN 파일이 변환 완료되면 THEN 시스템은 원본 크기와 WebP 크기를 표시해야 한다
2. WHEN 크기 정보가 표시되면 THEN "원본크기 → WebP크기" 형태로 보여줘야 한다
3. WHEN 미리보기에서 비교 정보를 표시하면 THEN 압축률을 백분율로 계산해서 보여줘야 한다
4. WHEN 압축률이 표시되면 THEN 절약된 용량을 강조 색상으로 표시해야 한다

### 요구사항 8: 다운로드 기능

**사용자 스토리:** 사용자로서 변환된 WebP 파일을 개별 또는 일괄 다운로드하고 싶다.

#### 승인 기준

1. WHEN 파일 변환이 완료되면 THEN 사용자는 개별 다운로드 버튼을 사용할 수 있어야 한다
2. WHEN 개별 다운로드를 클릭하면 THEN 원본 파일명에 .webp 확장자로 다운로드되어야 한다
3. WHEN 모든 파일이 완료되면 THEN 사용자는 ZIP 파일로 일괄 다운로드할 수 있어야 한다
4. WHEN ZIP 다운로드를 실행하면 THEN 모든 WebP 파일이 하나의 압축 파일로 제공되어야 한다

### 요구사항 9: 사용자 인터페이스

**사용자 스토리:** 사용자로서 직관적이고 반응형인 인터페이스를 통해 쉽게 애플리케이션을 사용하고 싶다.

#### 승인 기준

1. WHEN 애플리케이션이 로드되면 THEN 다크 테마의 모던한 UI가 표시되어야 한다
2. WHEN 파일 상태가 변경되면 THEN 적절한 색상과 아이콘으로 시각적 피드백을 제공해야 한다
3. WHEN 버튼에 마우스를 올리면 THEN 호버 효과와 툴팁이 표시되어야 한다
4. WHEN 모바일 기기에서 접근하면 THEN 반응형 레이아웃이 적용되어야 한다

### 요구사항 10: 성능 및 메모리 관리

**사용자 스토리:** 사용자로서 브라우저가 느려지거나 메모리 부족 없이 안정적으로 변환 작업을 수행하고 싶다.

#### 승인 기준

1. WHEN 파일이 삭제되면 THEN 시스템은 관련된 모든 Object URL을 해제해야 한다
2. WHEN 변환이 완료되면 THEN 시스템은 FFmpeg 가상 파일시스템을 정리해야 한다
3. WHEN 미리보기가 여러 개 열리지 않도록 THEN 한 번에 하나의 미리보기만 활성화되어야 한다
4. WHEN 원본 파일 URL이 생성되면 THEN 재사용을 위해 파일 객체에 저장되어야 한다

## 기술적 제약사항

- 클라이언트 사이드 전용 (서버 업로드 없음)
- FFmpeg.wasm v0.12+ 사용
- 최대 파일 크기: 50MB
- 최대 파일 개수: 20개
- 지원 입력 형식: MP4, AVI, MOV, MKV, WebM, FLV, WMV
- 출력 형식: 애니메이션 WebP
- SharedArrayBuffer 보안 헤더 필요

## 성능 목표

- 1MB 파일 변환 시간: 30초 이내
- 메모리 사용량: 파일당 100MB 이하
- UI 응답성: 변환 중에도 인터페이스 조작 가능
- 브라우저 호환성: Chrome 88+, Firefox 89+, Safari 15+
